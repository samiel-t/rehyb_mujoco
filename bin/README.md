## General disclaimer

The purpose of the `bin` folder is to store all files that are generated in this project.

Therefore, the content of all `bin` subfolders is gitignored. However, the folder structure is committed to display the expected structure of the `bin` folder.

## `bin` directory content

The stucture of the `bin` directory is presented below:

    ├── models
    ├── outputs
    ├── pgf_plots
    ├── pics
    └── README.md

Let's describe each of those items concisely:

- `models`: Directory containing all generated xml models (either via xacro files or python scripts). **Important: the structure of the `bin/models` folder mirrors that of the `models` folder. It is necessary to preserve that structure to ensure that file imports between xml models work properly**. For a more detailed explanation, see next Section.
- `outputs`: Directory containing all output data of python scripts. This directory also allows to cache temporary data.
- `pgf_plots`: Directory containing all generated pgf plots and tikz schematics.
- `pics`: Directory containing all generated pictures.
- `README.md`: Documentation of the `bin` folder, basically what you are reading right now.

All those files are .gitignored, though the folder structure be committed.

## `bin/models` mirrors `models` folder

Let's use an example to illustrate the need for a mirror between `models` and `bin/models`.

Let's consider the model located at `models/exo_with_patient/nesm_with_patient.xacro`. To model the exoskeleton arm supports, that model imports two `.xml` files, called `upper_arm_support.xml` and `lower_arm_support.xml`, via two MuJoCo `<include />` elements. Therefore, it matters that the relative path encoded in `nesm_with_patient.xacro` towards `upper_arm_support.xml` and `lower_arm_support.xml` be preserved when `nesm_with_patient.xml` is generated by `xacro.sh`.

In our example, the expected structure is:

    ├── exo_with_patient
        └── nesm_with_patient.xml
    └── arm_supports
        ├── lower_arm_supports.xml
        └── upper_arm_supports.xml

Any different structure would cause an import error when trying to load the model.

To avoid those relative imports issues, it has been chosen to replicate the `models` folder structure in the `bin/models` folder .

That mirroring can be easily maintained with the `xacro.sh` script. Indeed, for all`.xacro` file located in a subfolder of the `models` folder, calling `xacro.sh` with default arguments will automagically save the output `.xml` file in the correct folder. For example, the following command:

> path/to/rehyb_mujoco\$ ./xacro.sh models/exo_with_patient/nesm_with_patient.xacro

will generate the corresponding `.xml` file at `bin/models/exo_with_patient/nesm_with_patient.xml`. In case some `models` subfolders are missing in `bin/models`, `xacro.sh` will suggest to generate them.
